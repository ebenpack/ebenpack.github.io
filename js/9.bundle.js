(window.webpackJsonpmain=window.webpackJsonpmain||[]).push([[9],{8:function(t,e){function i(t,e){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.speed=e,this.last_updated=new Date,this.board=[],this.next_board=[],this.block_size=15,this.play=!1,this.intervalID=void 0,this.mouse={x:0,y:0},this.initialize()}function s(t,e,i){this.x=t,this.y=e,this.alive=i}i.prototype.initialize=function(){this.controls=document.createElement("div"),this.start=document.createElement("button"),this.reset=document.createElement("button"),this.speedlabel=document.createElement("label"),this.speedbutton=document.createElement("input"),this.speedbutton.type="range",this.speedbutton.min=0,this.speedbutton.max=100,this.speedbutton.value=this.speed,this.speedlabel.appendChild(this.speedbutton),this.start.textContent="Start",this.reset.textContent="Reset",this.speedlabel.textContent="Speed",this.controls.appendChild(this.start),this.controls.appendChild(this.reset),this.controls.appendChild(this.speedbutton),this.canvas.parentNode.appendChild(this.controls),this.addDefaults(),this.ctx.lineWidth=2,this.ctx.strokeStyle="grey",this.ctx.lineWidth=.4,this.register_events(),this.init_board(),this.draw_board(),this.update()},i.prototype._boardDump=function(){for(var t=[],e=0;e<this.board.length;e++)for(var i=0;i<this.board[i].length;i++)this.board[e][i].alive&&t.push([e,i]);return t},i.prototype.addDefaults=function(){var t=[["Glider",[[17,15],[18,13],[18,15],[19,14],[19,15]]],["Pulsar",[[12,11],[12,12],[12,13],[12,17],[12,18],[12,19],[14,9],[14,14],[14,16],[14,21],[15,9],[15,14],[15,16],[15,21],[16,9],[16,14],[16,16],[16,21],[17,11],[17,12],[17,13],[17,17],[17,18],[17,19],[19,11],[19,12],[19,13],[19,17],[19,18],[19,19],[20,9],[20,14],[20,16],[20,21],[21,9],[21,14],[21,16],[21,21],[22,9],[22,14],[22,16],[22,21],[24,11],[24,12],[24,13],[24,17],[24,18],[24,19]]],["Glider Gun",[[0,15],[0,16],[1,15],[1,16],[10,15],[10,16],[10,17],[11,14],[11,18],[12,13],[12,19],[13,13],[13,19],[14,16],[15,14],[15,18],[16,15],[16,16],[16,17],[17,16],[20,13],[20,14],[20,15],[21,13],[21,14],[21,15],[22,12],[22,16],[24,11],[24,12],[24,16],[24,17],[34,13],[34,14],[35,13],[35,14]]],["Empty Board",[]]],e=document.createElement("select"),i=document.createElement("option");i.textContent="Pre-made board configs",i.disabled=!0,i.selected=!0,e.appendChild(i);for(var s=0;s<t.length;s++)(i=document.createElement("option")).textContent=t[s][0],e.appendChild(i);this.canvas.parentNode.appendChild(e),e.addEventListener("change",function(e){var i=e.target.selectedIndex-1;i>=0&&this.loadBoard(t[i][1])}.bind(this))},i.prototype.init_board=function(){var t=Math.floor(this.canvas.width/this.block_size),e=Math.floor(this.canvas.height/this.block_size);this.board.length=0,this.next_board.length=0;for(var i=0;i<t;i++){var a=i*this.block_size;this.board[i]=[],this.next_board[i]=[];for(var o=0;o<e;o++){var n=o*this.block_size;this.board[i][o]=new s(a,n,0),this.next_board[i][o]=new s(a,n,0)}}},i.prototype.update_board=function(){for(var t=this.board.length,e=this.board[0].length,i=0;i<t;i++)for(var s=0;s<e;s++){for(var a=this.board[i][s],o=0,n=-1;n<=1;n++)for(var r=-1;r<=1;r++){var h=i+n,d=s+r;h<0&&(h+=t),d<0&&(d+=e),h%=t,d%=e,o+=this.board[h][d].alive}a.alive&&(o-=1),a.alive?this.next_board[i][s].alive=2===o||3===o?1:0:this.next_board[i][s].alive=3===o?1:0}for(i=0;i<t;i++)for(s=0;s<e;s++)this.board[i][s].alive=this.next_board[i][s].alive},i.prototype.reset_board=function(){this.play&&(this.play=!1,this.start.textContent="Start"),this.init_board(),this.draw_board()},i.prototype.loadBoard=function(t){this.reset_board();for(var e=0;e<t.length;e++){var i=t[e];this.board[i[0]][i[1]].alive=1}this.draw_board()},i.prototype.playPause=function(){this.play?this.start.textContent="Start":this.start.textContent="Pause",this.play=!this.play},i.prototype.draw_board=function(){var t=this.canvas.width,e=this.canvas.height,i=this.block_size,s=this.ctx;s.clearRect(0,0,t,e);for(var a=this.board.length,o=this.board[0].length,n=0;n<a;n++){s.beginPath(),s.moveTo(0,n*i),s.lineTo(t,n*i),s.stroke(),s.closePath(),s.beginPath(),s.moveTo(n*i,0),s.lineTo(n*i,e),s.stroke(),s.closePath();for(var r=0;r<o;r++){var h=this.board[n][r];1===h.alive?(s.fillStyle="black",s.beginPath(),s.rect(h.x,h.y,i,i),s.fill(),s.closePath()):this.play||this.mouse.x!==h.x||this.mouse.y!==h.y||(s.fillStyle="grey",s.beginPath(),s.rect(this.mouse.x,this.mouse.y,i,i),s.fill(),s.closePath())}}},i.prototype.register_events=function(){var t=this;this.start.addEventListener("click",this.playPause.bind(this),!1),this.reset.addEventListener("click",this.reset_board.bind(this),!1),this.speedbutton.addEventListener("input",(function(e){t.speed=parseInt(this.value,10)}));this.canvas.addEventListener("mousedown",(function(e){var i=t.board.length,s=t.board[0].length,a=e.offsetX?e.offsetX:e.layerX,o=e.offsetY?e.offsetY:e.layerY,n=Math.floor(a/t.block_size),r=Math.floor(o/t.block_size);n>=i&&(n=i-1),r>=s&&(r=s-1),n<0&&(n=0),r<0&&(r=0);var h=t.board[n][r];h.alive=(h.alive+1)%2,t.play||t.draw_board()})),this.canvas.addEventListener("mousemove",(function(e){t.board.length,t.board[0].length;var i=e.offsetX?e.offsetX:e.layerX,s=e.offsetY?e.offsetY:e.layerY,a=Math.floor(s/t.block_size)*t.block_size,o=Math.floor(i/t.block_size)*t.block_size;t.mouse.x=o,t.mouse.y=a,t.play||t.draw_board()}))},i.prototype.update=function(){if(this.play){var t=new Date;t-this.last_updated>1e3-10*this.speed&&(this.update_board(),this.draw_board(),this.last_updated=t)}window.requestAnimationFrame(this.update.bind(this))},t.exports=i}}]);