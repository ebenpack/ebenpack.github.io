(window.webpackJsonpmain=window.webpackJsonpmain||[]).push([[11],{4:function(t,i,s){t.exports=function t(i,s,e){function r(o,n){if(!s[o]){if(!i[o]){if(h)return h(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=s[o]={exports:{}};i[o][0].call(a.exports,(function(t){var s=i[o][1][t];return r(s||t)}),a,a.exports,t,i,s,e)}return s[o].exports}for(var h=!1,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,i,s){var e,r,h,o;function n(t,i){var s,n,a={};"string"==typeof t?((t=t.toLowerCase())in o?a=o[t]:(a=h(t),o[t]=a),n=a,s=r(a.r,a.g,a.b),i=a.a||i||1):"r"in t?(n=t,i=(s=r(t.r,t.g,t.b)).a||i||1):"h"in t&&(s=t,i=(n=e(t.h,t.s,t.l)).a||i||1),this.rgb={r:n.r,g:n.g,b:n.b},this.hsl={h:s.h,s:s.s,l:s.l},this.alpha=i,this._color_string=this._toString()}function a(t,i,s){return t<i?t=i:t>s&&(t=s),t}n.prototype.lighten=function(t){var i=this.hsl,s=i.l+t;return s>100&&(s=100),new n({h:i.h,s:i.s,l:s},this.alpha)},n.prototype.darken=function(t){var i=this.hsl,s=i.l-t;return s<0&&(s=0),new n({h:i.h,s:i.s,l:s},this.alpha)},n.prototype.toString=function(){return this._color_string},n.prototype._toString=function(){var t=this.rgb.r.toString(16),i=this.rgb.g.toString(16),s=this.rgb.b.toString(16);return 1===t.length&&(t="0"+t),1===i.length&&(i="0"+i),1===s.length&&(s="0"+s),"#"+t+i+s},e=function(t,i,s){function e(t,i,s){return(s=s)<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(i-t)*s*6:s<.5?i:s<2/3?t+(i-t)*(2/3-s)*6:t}var r,h=s/100,o=i/100;if(0===i){var n=255*h;return{r:n,g:n,b:n}}var a=2*h-(r=s<=50?h*(1+o):h+o-h*o);return t/=360,{r:Math.round(255*e(a,r,t+1/3)),g:Math.round(255*e(a,r,t)),b:Math.round(255*e(a,r,t-1/3))}},r=function(t,i,s){t/=255,i/=255,s/=255;var e,r,h=Math.max(t,i,s),o=Math.min(t,i,s),n=Math.round((o+h)/2*100);if(n>100&&(n=100),n<0&&(n=0),o===h)return{h:0,s:0,l:n};r=n<=50?(h-o)/(h+o):(h-o)/(2-h-o);var a=(h-t)/(h-o),l=(h-i)/(h-o),c=(h-s)/(h-o);return(e=(e=t===h?c-l:i===h?2+a-c:4+l-a)/6%1)<0&&(e+=1),(e=Math.round(360*e))>360&&(e=360),e<0&&(e=0),(r=Math.round(100*r))>100&&(r=100),r<0&&(r=0),{h:e,s:r,l:n}},h=function(t){var i,s,r,h,o,n,l,c=1,u=!1,p=t.substr(0,3);if("hsl"===p)if(l=/hsla?\(\s*(-?\d+)\s*,\s*(-?\d+)%\s*,\s*(-?\d+)%\s*(,\s*(-?\d+(\.\d+)?)\s*)?\)/g.exec(t)){h=parseInt(l[1],10),o=parseInt(l[2],10),n=parseInt(l[3],10),"a"===t[3]&&(c=parseFloat(l[5])),h=Math.abs(h%360),o=a(o,0,100),n=a(n,0,100);var _=e(h,o,n);i=_.r,s=_.g,r=_.b}else u=!0;else if("rgb"===p)if(l=/rgba?\((-?\d+%?)\s*,\s*(-?\d+%?)\s*,\s*(-?\d+%?)(,\s*(-?\d+(\.\d+)?)\s*)?\)/g.exec(t)){var g=l[1],f=l[2],d=l[3];i=parseInt(l[1],10),s=parseInt(l[2],10),r=parseInt(l[3],10),"%"!==g[g.length-1]&&"%"!==f[f.length-1]&&"%"!==d[d.length-1]||("%"===g[g.length-1]&&"%"===f[f.length-1]&&"%"===d[d.length-1]?(i=Math.floor(i/100*255),s=Math.floor(s/100*255),r=Math.floor(r/100*255)):u=!0),i=a(i,0,255),s=a(s,0,255),r=a(r,0,255),"a"===t[3]&&(c=parseFloat(l[5]))}else u=!0;else if("#"===t[0]){var y=t.substr(1);3===y.length?(i=parseInt(y[0]+y[0],16),s=parseInt(y[1]+y[1],16),r=parseInt(y[2]+y[2],16)):6===y.length?(i=parseInt(y[0]+y[1],16),s=parseInt(y[2]+y[3],16),r=parseInt(y[4]+y[5],16)):u=!0}else u=!0;if(c=a(c,0,1),u)throw"ColourError: Something went wrong. Perhaps "+t+" is not a legal CSS color value";return{r:i,g:s,b:r,a:c}},o={black:{r:0,g:0,b:0,h:0,s:0,l:0},silver:{r:192,g:192,b:192,h:0,s:0,l:75},gray:{r:128,g:128,b:128,h:0,s:0,l:50},white:{r:255,g:255,b:255,h:0,s:0,l:100},maroon:{r:128,g:0,b:0,h:0,s:100,l:25},red:{r:255,g:0,b:0,h:0,s:100,l:50},purple:{r:128,g:0,b:128,h:300,s:100,l:25},fuchsia:{r:255,g:0,b:255,h:300,s:100,l:50},green:{r:0,g:128,b:0,h:120,s:100,l:25},lime:{r:0,g:255,b:0,h:120,s:100,l:50},olive:{r:128,g:128,b:0,h:60,s:100,l:25},yellow:{r:255,g:255,b:0,h:60,s:100,l:50},navy:{r:0,g:0,b:128,h:240,s:100,l:25},blue:{r:0,g:0,b:255,h:240,s:100,l:50},teal:{r:0,g:128,b:128,h:180,s:100,l:25},aqua:{r:0,g:255,b:255,h:180,s:100,l:50},orange:{r:255,g:165,b:0,h:39,s:100,l:50},aliceblue:{r:240,g:248,b:255,h:208,s:100,l:97},antiquewhite:{r:250,g:235,b:215,h:34,s:78,l:91},aquamarine:{r:127,g:255,b:212,h:160,s:100,l:75},azure:{r:240,g:255,b:255,h:180,s:100,l:97},beige:{r:245,g:245,b:220,h:60,s:56,l:91},bisque:{r:255,g:228,b:196,h:33,s:100,l:88},blanchedalmond:{r:255,g:235,b:205,h:36,s:100,l:90},blueviolet:{r:138,g:43,b:226,h:271,s:76,l:53},brown:{r:165,g:42,b:42,h:0,s:59,l:41},burlywood:{r:222,g:184,b:135,h:34,s:57,l:70},cadetblue:{r:95,g:158,b:160,h:182,s:25,l:50},chartreuse:{r:127,g:255,b:0,h:90,s:100,l:50},chocolate:{r:210,g:105,b:30,h:25,s:75,l:47},coral:{r:255,g:127,b:80,h:16,s:100,l:66},cornflowerblue:{r:100,g:149,b:237,h:219,s:79,l:66},cornsilk:{r:255,g:248,b:220,h:48,s:100,l:93},cyan:{r:0,g:255,b:255,h:180,s:100,l:97},crimson:{r:220,g:20,b:60,h:348,s:83,l:47},darkblue:{r:0,g:0,b:139,h:240,s:100,l:27},darkcyan:{r:0,g:139,b:139,h:180,s:100,l:27},darkgoldenrod:{r:184,g:134,b:11,h:43,s:89,l:38},darkgray:{r:169,g:169,b:169,h:0,s:0,l:66},darkgreen:{r:0,g:100,b:0,h:120,s:100,l:20},darkgrey:{r:169,g:169,b:169,h:0,s:0,l:66},darkkhaki:{r:189,g:183,b:107,h:56,s:38,l:58},darkmagenta:{r:139,g:0,b:139,h:300,s:100,l:27},darkolivegreen:{r:85,g:107,b:47,h:82,s:39,l:30},darkorange:{r:255,g:140,b:0,h:33,s:100,l:50},darkorchid:{r:153,g:50,b:204,h:280,s:61,l:50},darkred:{r:139,g:0,b:0,h:0,s:100,l:27},darksalmon:{r:233,g:150,b:122,h:15,s:72,l:70},darkseagreen:{r:143,g:188,b:143,h:120,s:25,l:65},darkslateblue:{r:72,g:61,b:139,h:248,s:39,l:39},darkslategray:{r:47,g:79,b:79,h:180,s:25,l:25},darkslategrey:{r:47,g:79,b:79,h:180,s:25,l:25},darkturquoise:{r:0,g:206,b:209,h:181,s:100,l:41},darkviolet:{r:148,g:0,b:211,h:282,s:100,l:41},deeppink:{r:255,g:20,b:147,h:328,s:100,l:54},deepskyblue:{r:0,g:191,b:255,h:195,s:100,l:50},dimgray:{r:105,g:105,b:105,h:0,s:0,l:41},dimgrey:{r:105,g:105,b:105,h:0,s:0,l:41},dodgerblue:{r:30,g:144,b:255,h:210,s:100,l:56},firebrick:{r:178,g:34,b:34,h:0,s:68,l:42},floralwhite:{r:255,g:250,b:240,h:40,s:100,l:97},forestgreen:{r:34,g:139,b:34,h:120,s:61,l:34},gainsboro:{r:220,g:220,b:220,h:0,s:0,l:86},ghostwhite:{r:248,g:248,b:255,h:240,s:100,l:99},gold:{r:255,g:215,b:0,h:51,s:100,l:50},goldenrod:{r:218,g:165,b:32,h:43,s:74,l:49},greenyellow:{r:173,g:255,b:47,h:84,s:100,l:59},grey:{r:128,g:128,b:128,h:0,s:0,l:50},honeydew:{r:240,g:255,b:240,h:120,s:100,l:97},hotpink:{r:255,g:105,b:180,h:330,s:100,l:71},indianred:{r:205,g:92,b:92,h:0,s:53,l:58},indigo:{r:75,g:0,b:130,h:275,s:100,l:25},ivory:{r:255,g:255,b:240,h:60,s:100,l:97},khaki:{r:240,g:230,b:140,h:54,s:77,l:75},lavender:{r:230,g:230,b:250,h:240,s:67,l:94},lavenderblush:{r:255,g:240,b:245,h:340,s:100,l:97},lawngreen:{r:124,g:252,b:0,h:90,s:100,l:49},lemonchiffon:{r:255,g:250,b:205,h:54,s:100,l:90},lightblue:{r:173,g:216,b:230,h:195,s:53,l:79},lightcoral:{r:240,g:128,b:128,h:0,s:79,l:72},lightcyan:{r:224,g:255,b:255,h:180,s:100,l:94},lightgoldenrodyellow:{r:250,g:250,b:210,h:60,s:80,l:90},lightgray:{r:211,g:211,b:211,h:0,s:0,l:83},lightgreen:{r:144,g:238,b:144,h:120,s:73,l:75},lightgrey:{r:211,g:211,b:211,h:0,s:0,l:83},lightpink:{r:255,g:182,b:193,h:351,s:100,l:86},lightsalmon:{r:255,g:160,b:122,h:17,s:100,l:74},lightseagreen:{r:32,g:178,b:170,h:177,s:70,l:41},lightskyblue:{r:135,g:206,b:250,h:203,s:92,l:75},lightslategray:{r:119,g:136,b:153,h:210,s:14,l:53},lightslategrey:{r:119,g:136,b:153,h:210,s:14,l:53},lightsteelblue:{r:176,g:196,b:222,h:214,s:41,l:78},lightyellow:{r:255,g:255,b:224,h:60,s:100,l:94},limegreen:{r:50,g:205,b:50,h:120,s:61,l:50},linen:{r:250,g:240,b:230,h:30,s:67,l:94},magenta:{r:255,g:0,b:255,h:17,s:100,l:74},mediumaquamarine:{r:102,g:205,b:170,h:160,s:51,l:60},mediumblue:{r:0,g:0,b:205,h:240,s:100,l:40},mediumorchid:{r:186,g:85,b:211,h:288,s:59,l:58},mediumpurple:{r:147,g:112,b:219,h:260,s:60,l:65},mediumseagreen:{r:60,g:179,b:113,h:147,s:50,l:47},mediumslateblue:{r:123,g:104,b:238,h:249,s:80,l:67},mediumspringgreen:{r:0,g:250,b:154,h:157,s:100,l:49},mediumturquoise:{r:72,g:209,b:204,h:178,s:60,l:55},mediumvioletred:{r:199,g:21,b:133,h:322,s:81,l:43},midnightblue:{r:25,g:25,b:112,h:240,s:64,l:27},mintcream:{r:245,g:255,b:250,h:150,s:100,l:98},mistyrose:{r:255,g:228,b:225,h:6,s:100,l:94},moccasin:{r:255,g:228,b:181,h:38,s:100,l:85},navajowhite:{r:255,g:222,b:173,h:36,s:100,l:84},oldlace:{r:253,g:245,b:230,h:39,s:85,l:95},olivedrab:{r:107,g:142,b:35,h:80,s:60,l:35},orangered:{r:255,g:69,b:0,h:16,s:100,l:50},orchid:{r:218,g:112,b:214,h:302,s:59,l:65},palegoldenrod:{r:238,g:232,b:170,h:55,s:67,l:80},palegreen:{r:152,g:251,b:152,h:120,s:93,l:79},paleturquoise:{r:175,g:238,b:238,h:180,s:65,l:81},palevioletred:{r:219,g:112,b:147,h:340,s:60,l:65},papayawhip:{r:255,g:239,b:213,h:37,s:100,l:92},peachpuff:{r:255,g:218,b:185,h:28,s:100,l:86},peru:{r:205,g:133,b:63,h:30,s:59,l:53},pink:{r:255,g:192,b:203,h:350,s:100,l:88},plum:{r:221,g:160,b:221,h:300,s:47,l:75},powderblue:{r:176,g:224,b:230,h:187,s:52,l:80},rosybrown:{r:188,g:143,b:143,h:0,s:25,l:65},royalblue:{r:65,g:105,b:225,h:225,s:73,l:57},saddlebrown:{r:139,g:69,b:19,h:25,s:76,l:31},salmon:{r:250,g:128,b:114,h:6,s:93,l:71},sandybrown:{r:244,g:164,b:96,h:28,s:87,l:67},seagreen:{r:46,g:139,b:87,h:146,s:50,l:36},seashell:{r:255,g:245,b:238,h:25,s:100,l:97},sienna:{r:160,g:82,b:45,h:19,s:56,l:40},skyblue:{r:135,g:206,b:235,h:197,s:71,l:73},slateblue:{r:106,g:90,b:205,h:248,s:53,l:58},slategray:{r:112,g:128,b:144,h:210,s:13,l:50},slategrey:{r:112,g:128,b:144,h:210,s:13,l:50},snow:{r:255,g:250,b:250,h:0,s:100,l:99},springgreen:{r:0,g:255,b:127,h:150,s:100,l:50},steelblue:{r:70,g:130,b:180,h:207,s:44,l:49},tan:{r:210,g:180,b:140,h:34,s:44,l:69},thistle:{r:216,g:191,b:216,h:300,s:24,l:80},tomato:{r:255,g:99,b:71,h:9,s:100,l:64},turquoise:{r:64,g:224,b:208,h:174,s:72,l:56},violet:{r:238,g:130,b:238,h:300,s:76,l:72},wheat:{r:245,g:222,b:179,h:39,s:77,l:83},whitesmoke:{r:245,g:245,b:245,h:0,s:0,l:96},yellowgreen:{r:154,g:205,b:50,h:80,s:61,l:50}},i.exports=n},{}],2:[function(t,i,s){
/**
 * @license
 * Copyright (c) 2014 Eben Packwood. All rights reserved.
 * MIT License
 *
 */
var e=t("./vector.js"),r=t("./matrix.js"),h=Object.create(null);h.Vector=e,h.Matrix=r,i.exports=h},{"./matrix.js":3,"./vector.js":4}],3:[function(t,i,s){var e=t("./vector.js");function r(){for(var t=0;t<16;t++)this[t]=0;this.length=16}r.prototype.equal=function(t){for(var i=0,s=this.length;i<s;i++)if(this[i]!==t[i])return!1;return!0},r.prototype.add=function(t){for(var i=new r,s=0,e=this.length;s<e;s++)i[s]=this[s]+t[s];return i},r.prototype.addLG=function(t,i){return i[0]=this[0]+t[0],i[1]=this[1]+t[1],i[2]=this[2]+t[2],i[3]=this[3]+t[3],i[4]=this[4]+t[4],i[5]=this[5]+t[5],i[6]=this[6]+t[6],i[7]=this[7]+t[7],i[8]=this[8]+t[8],i[9]=this[9]+t[9],i[10]=this[10]+t[10],i[11]=this[11]+t[11],i[12]=this[12]+t[12],i[13]=this[13]+t[13],i[14]=this[14]+t[14],i[15]=this[15]+t[15],i},r.prototype.subtract=function(t){for(var i=new r,s=0,e=this.length;s<e;s++)i[s]=this[s]-t[s];return i},r.prototype.subtractLG=function(t,i){return i[0]=this[0]-t[0],i[1]=this[1]-t[1],i[2]=this[2]-t[2],i[3]=this[3]-t[3],i[4]=this[4]-t[4],i[5]=this[5]-t[5],i[6]=this[6]-t[6],i[7]=this[7]-t[7],i[8]=this[8]-t[8],i[9]=this[9]-t[9],i[10]=this[10]-t[10],i[11]=this[11]-t[11],i[12]=this[12]-t[12],i[13]=this[13]-t[13],i[14]=this[14]-t[14],i[15]=this[15]-t[15],i},r.prototype.multiplyScalar=function(t){for(var i=new r,s=0,e=this.length;s<e;s++)i[s]=this[s]*t;return i},r.prototype.multiplyScalarLG=function(t,i){return i[0]=this[0]*t,i[1]=this[1]*t,i[2]=this[2]*t,i[3]=this[3]*t,i[4]=this[4]*t,i[5]=this[5]*t,i[6]=this[6]*t,i[7]=this[7]*t,i[8]=this[8]*t,i[9]=this[9]*t,i[10]=this[10]*t,i[11]=this[11]*t,i[12]=this[12]*t,i[13]=this[13]*t,i[14]=this[14]*t,i[15]=this[15]*t,i},r.prototype.multiply=function(t){var i=new r;return i[0]=this[0]*t[0]+this[1]*t[4]+this[2]*t[8]+this[3]*t[12],i[1]=this[0]*t[1]+this[1]*t[5]+this[2]*t[9]+this[3]*t[13],i[2]=this[0]*t[2]+this[1]*t[6]+this[2]*t[10]+this[3]*t[14],i[3]=this[0]*t[3]+this[1]*t[7]+this[2]*t[11]+this[3]*t[15],i[4]=this[4]*t[0]+this[5]*t[4]+this[6]*t[8]+this[7]*t[12],i[5]=this[4]*t[1]+this[5]*t[5]+this[6]*t[9]+this[7]*t[13],i[6]=this[4]*t[2]+this[5]*t[6]+this[6]*t[10]+this[7]*t[14],i[7]=this[4]*t[3]+this[5]*t[7]+this[6]*t[11]+this[7]*t[15],i[8]=this[8]*t[0]+this[9]*t[4]+this[10]*t[8]+this[11]*t[12],i[9]=this[8]*t[1]+this[9]*t[5]+this[10]*t[9]+this[11]*t[13],i[10]=this[8]*t[2]+this[9]*t[6]+this[10]*t[10]+this[11]*t[14],i[11]=this[8]*t[3]+this[9]*t[7]+this[10]*t[11]+this[11]*t[15],i[12]=this[12]*t[0]+this[13]*t[4]+this[14]*t[8]+this[15]*t[12],i[13]=this[12]*t[1]+this[13]*t[5]+this[14]*t[9]+this[15]*t[13],i[14]=this[12]*t[2]+this[13]*t[6]+this[14]*t[10]+this[15]*t[14],i[15]=this[12]*t[3]+this[13]*t[7]+this[14]*t[11]+this[15]*t[15],i},r.prototype.multiplyLG=function(t,i){return i[0]=this[0]*t[0]+this[1]*t[4]+this[2]*t[8]+this[3]*t[12],i[1]=this[0]*t[1]+this[1]*t[5]+this[2]*t[9]+this[3]*t[13],i[2]=this[0]*t[2]+this[1]*t[6]+this[2]*t[10]+this[3]*t[14],i[3]=this[0]*t[3]+this[1]*t[7]+this[2]*t[11]+this[3]*t[15],i[4]=this[4]*t[0]+this[5]*t[4]+this[6]*t[8]+this[7]*t[12],i[5]=this[4]*t[1]+this[5]*t[5]+this[6]*t[9]+this[7]*t[13],i[6]=this[4]*t[2]+this[5]*t[6]+this[6]*t[10]+this[7]*t[14],i[7]=this[4]*t[3]+this[5]*t[7]+this[6]*t[11]+this[7]*t[15],i[8]=this[8]*t[0]+this[9]*t[4]+this[10]*t[8]+this[11]*t[12],i[9]=this[8]*t[1]+this[9]*t[5]+this[10]*t[9]+this[11]*t[13],i[10]=this[8]*t[2]+this[9]*t[6]+this[10]*t[10]+this[11]*t[14],i[11]=this[8]*t[3]+this[9]*t[7]+this[10]*t[11]+this[11]*t[15],i[12]=this[12]*t[0]+this[13]*t[4]+this[14]*t[8]+this[15]*t[12],i[13]=this[12]*t[1]+this[13]*t[5]+this[14]*t[9]+this[15]*t[13],i[14]=this[12]*t[2]+this[13]*t[6]+this[14]*t[10]+this[15]*t[14],i[15]=this[12]*t[3]+this[13]*t[7]+this[14]*t[11]+this[15]*t[15],i},r.prototype.negate=function(){for(var t=new r,i=0,s=this.length;i<s;i++)t[i]=-this[i];return t},r.prototype.negateLG=function(t){return t[0]=-this[0],t[1]=-this[1],t[2]=-this[2],t[3]=-this[3],t[4]=-this[4],t[5]=-this[5],t[6]=-this[6],t[7]=-this[7],t[8]=-this[8],t[9]=-this[9],t[10]=-this[10],t[11]=-this[11],t[12]=-this[12],t[13]=-this[13],t[14]=-this[14],t[15]=-this[15],t},r.prototype.transpose=function(){var t=new r;return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t},r.prototype.transposeLG=function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t},r.prototype.empty=function(){for(var t=0,i=this.length;t<i;t++)this[t]=0},r.prototype.copy=function(t){for(var i=0;i<16;i++)t[i]=this[i];return t},r.rotationX=function(t){var i=new r,s=Math.cos(t),e=Math.sin(t);return i[0]=1,i[5]=s,i[6]=-e,i[9]=e,i[10]=s,i[15]=1,i},r.rotationXLG=function(t,i){var s=Math.cos(t),e=Math.sin(t);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=-e,i[7]=0,i[8]=0,i[9]=e,i[10]=s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},r.rotationY=function(t){var i=new r,s=Math.cos(t),e=Math.sin(t);return i[0]=s,i[2]=e,i[5]=1,i[8]=-e,i[10]=s,i[15]=1,i},r.rotationYLG=function(t,i){var s=Math.cos(t),e=Math.sin(t);return i[0]=s,i[1]=0,i[2]=e,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=-e,i[9]=0,i[10]=s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},r.rotationZ=function(t){var i=new r,s=Math.cos(t),e=Math.sin(t);return i[0]=s,i[1]=-e,i[4]=e,i[5]=s,i[10]=1,i[15]=1,i},r.rotationZLG=function(t,i){var s=Math.cos(t),e=Math.sin(t);return i[0]=s,i[1]=-e,i[2]=0,i[3]=0,i[4]=e,i[5]=s,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},r.rotationAxis=function(t,i){var s=new r,e=t.normalize(),h=Math.sin(i),o=Math.cos(i),n=1-o,a=e.x,l=e.y,c=e.z,u=a*l,p=a*c,_=l*c;return s[0]=o+a*a*n,s[1]=u*n-c*h,s[2]=p*n+l*h,s[4]=u*n+c*h,s[5]=o+l*l*n,s[6]=_*n-a*h,s[8]=p*n-l*h,s[9]=_*n+a*h,s[10]=o+c*c*n,s[15]=1,s},r.rotationAxisLG=function(t,i,s){t.normalizeLG(l);var e=Math.sin(i),r=Math.cos(i),h=1-r,o=l.x,n=l.y,a=l.z,c=o*n,u=o*a,p=n*a;return s[0]=r+o*o*h,s[1]=c*h-a*e,s[2]=u*h+n*e,s[3]=0,s[4]=c*h+a*e,s[5]=r+n*n*h,s[6]=p*h-o*e,s[7]=0,s[8]=u*h-n*e,s[9]=p*h+o*e,s[10]=r+a*a*h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},r.rotation=function(t,i,s){return r.rotationX(s).multiply(r.rotationZ(i)).multiply(r.rotationY(t))},r.rotationLG=function(t,i,s,e){return r.rotationXLG(s,h),r.rotationZLG(i,o),r.rotationYLG(t,n),h.multiplyLG(o,a),a.multiplyLG(n,e),e},r.translation=function(t,i,s){var e=r.identity();return e[12]=t,e[13]=i,e[14]=s,e},r.translationLG=function(t,i,s,e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[12]=t,e[13]=i,e[14]=s,e[15]=1,e},r.scale=function(t,i,s){var e=new r;return e[0]=t,e[5]=i,e[10]=s,e[15]=1,e},r.scaleLG=function(t,i,s,e){return e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.identity=function(){var t=new r;return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},r.identityLG=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.zero=function(){return new r},r.zeroLG=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,t},r.fromArray=function(t){for(var i=new r,s=0;s<16;s++)i[s]=t[s];return i},r.fromArrayLG=function(t,i){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},r.copy=function(t,i){for(var s=0;s<16;s++)i[s]=t[s];return i};var h=new r,o=new r,n=new r,a=new r,l=new e(0,0,0);i.exports=r},{"./vector.js":4}],4:[function(t,i,s){function e(t,i,s){if(void 0===t||void 0===i||void 0===s)throw new Error("Insufficient arguments.");this.x=t,this.y=i,this.z=s}e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.addLG=function(t,i){return i.x=this.x+t.x,i.y=this.y+t.y,i.z=this.z+t.z,i},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.subtractLG=function(t,i){return i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z,i},e.prototype.equal=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},e.prototype.angle=function(t){var i=this.normalize(),s=t.normalize(),e=i.magnitude(),r=s.magnitude();if(0===e||0===r)return 0;var h=i.dot(s)/(e*r);return h<-1&&(h=-1),h>1&&(h=1),Math.acos(h)},e.prototype.angleLG=function(t){this.normalizeLG(r),t.normalizeLG(h);var i=r.magnitude(),s=h.magnitude();if(0===i||0===s)return 0;var e=r.dot(h)/(i*s);return e<-1&&(e=-1),e>1&&(e=1),Math.acos(e)},e.prototype.cosAngle=function(t){var i=this.normalize(),s=t.normalize(),e=i.magnitude(),r=s.magnitude();if(0===e||0===r)return 0;var h=i.dot(s)/(e*r);return h<-1&&(h=-1),h>1&&(h=1),h},e.prototype.cosAngleLG=function(t){this.normalizeLG(r),t.normalizeLG(h);var i=r.magnitude(),s=h.magnitude();if(0===i||0===s)return 0;var e=r.dot(h)/(i*s);return e<-1&&(e=-1),e>1&&(e=1),e},e.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.crossLG=function(t,i){return i.x=this.y*t.z-this.z*t.y,i.y=this.z*t.x-this.x*t.z,i.z=this.x*t.y-this.y*t.x,i},e.prototype.normalize=function(){var t=this.magnitude();return 0===t?new e(this.x,this.y,this.z):new e(this.x/t,this.y/t,this.z/t)},e.prototype.normalizeLG=function(t){var i=this.magnitude();return 0===i&&(t.x=this.x,t.y=this.y,t.z=this.z),t.x=this.x/i,t.y=this.y/i,t.z=this.z/i,t},e.prototype.scale=function(t){return new e(this.x*t,this.y*t,this.z*t)},e.prototype.scaleLG=function(t,i){return i.x=this.x*t,i.y=this.y*t,i.z=this.z*t,i},e.prototype.negate=function(){return new e(-this.x,-this.y,-this.z)},e.prototype.negateLG=function(t){return t.x=-this.x,t.y=-this.y,t.z=-this.z,t},e.prototype.vectorProjection=function(t){var i=t.magnitude();return t.scale(this.dot(t)/(i*i))},e.prototype.vectorProjectionLG=function(t,i){var s=t.magnitude();return t.scaleLG(this.dot(t)/(s*s),i),i},e.prototype.scalarProjection=function(t){return this.dot(t)/t.magnitude()},e.prototype.transform=function(t){var i=this.x*t[0]+this.y*t[4]+this.z*t[8]+t[12],s=this.x*t[1]+this.y*t[5]+this.z*t[9]+t[13],r=this.x*t[2]+this.y*t[6]+this.z*t[10]+t[14],h=this.x*t[3]+this.y*t[7]+this.z*t[11]+t[15];return new e(i/h,s/h,r/h)},e.prototype.transformLG=function(t,i){var s=this.x*t[0]+this.y*t[4]+this.z*t[8]+t[12],e=this.x*t[1]+this.y*t[5]+this.z*t[9]+t[13],r=this.x*t[2]+this.y*t[6]+this.z*t[10]+t[14],h=this.x*t[3]+this.y*t[7]+this.z*t[11]+t[15];return i.x=s/h,i.y=e/h,i.z=r/h,i},e.prototype.rotate=function(t,i){var s=t.normalize(),r=Math.sin(i),h=Math.cos(i),o=1-h,n=s.x,a=s.y,l=s.z,c=s.x*s.y,u=s.x*s.z,p=s.y*s.z;return new e((h+n*n*o)*this.x+(c*o-l*r)*this.y+(u*o+a*r)*this.z,(c*o+l*r)*this.x+(h+a*a*o)*this.y+(p*o-n*r)*this.z,(u*o-a*r)*this.x+(p*o+n*r)*this.y+(h+n*n*o)*this.z)},e.prototype.rotateLG=function(t,i,s){t.normalizeLG(s);var e=Math.sin(i),r=Math.cos(i),h=1-r,o=s.x,n=s.y,a=s.z,l=s.x*s.y,c=s.x*s.z,u=s.y*s.z,p=(r+o*o*h)*this.x+(l*h-a*e)*this.y+(c*h+n*e)*this.z,_=(l*h+a*e)*this.x+(r+n*n*h)*this.y+(u*h-o*e)*this.z,g=(c*h-n*e)*this.x+(u*h+o*e)*this.y+(r+o*o*h)*this.z;return s.x=p,s.y=_,s.z=g,s},e.prototype.rotateX=function(t){var i=Math.sin(t),s=Math.cos(t);return new e(this.x,s*this.y-i*this.z,i*this.y+s*this.z)},e.prototype.rotateXLG=function(t,i){var s=Math.sin(t),e=Math.cos(t),r=this.x,h=e*this.y-s*this.z,o=s*this.y+e*this.z;return i.x=r,i.y=h,i.z=o,i},e.prototype.rotateY=function(t){var i=Math.sin(t),s=Math.cos(t);return new e(s*this.x+i*this.z,this.y,-i*this.x+s*this.z)},e.prototype.rotateYLG=function(t,i){var s=Math.sin(t),e=Math.cos(t),r=e*this.x+s*this.z,h=this.y,o=-s*this.x+e*this.z;return i.x=r,i.y=h,i.z=o,i},e.prototype.rotateZ=function(t){var i=Math.sin(t),s=Math.cos(t);return new e(s*this.x-i*this.y,i*this.x+s*this.y,this.z)},e.prototype.rotateZLG=function(t,i){var s=Math.sin(t),e=Math.cos(t),r=e*this.x-s*this.y,h=s*this.x+e*this.y,o=this.z;return i.x=r,i.y=h,i.z=o,i},e.prototype.rotatePitchYawRoll=function(t,i,s){return this.rotateX(s).rotateY(t).rotateZ(i)},e.prototype.rotatePitchYawRollLG=function(t,i,s,e){return this.rotateXLG(s,e),e.rotateYLG(t,e),e.rotateZLG(i,e),e};var r=new e(0,0,0),h=new e(0,0,0);i.exports=e},{}],5:[function(t,i,s){var e=t("linearalgea"),r=e.Vector,h=e.Matrix,o=2*Math.PI;function n(t,i,s){this.position=s||new r(1,1,20),this.up=new r(0,1,0),this.rotation={yaw:0,pitch:0,roll:0},this.view_matrix=new h,this.width=t,this.height=i,this.near=.1,this.far=1e3,this.fov=90,this.perspectiveFov=new h,this._xaxis=new r(0,0,0),this._yaxis=new r(0,0,0),this._zaxis=new r(0,0,0),this._direction=new r(0,0,0),this._temp_vector1=new r(0,0,0),this._temp_vector2=new r(0,0,0),this._temp_matrix=new h,this.calculatePerspectiveFov(),this.createViewMatrix()}n.prototype.direction=function(){var t=Math.sin(this.rotation.pitch),i=Math.cos(this.rotation.pitch),s=Math.sin(this.rotation.yaw),e=Math.cos(this.rotation.yaw);this._direction.x=-i*s,this._direction.y=t,this._direction.z=-i*e},n.prototype.calculatePerspectiveFov=function(){var t=this.fov*(Math.PI/180),i=this.width/this.height,s=this.near,e=this.far,r=1/Math.tan(t/2)*this.height,h=r*i;this.perspectiveFov[0]=h,this.perspectiveFov[5]=r,this.perspectiveFov[10]=e/(s-e),this.perspectiveFov[11]=-1,this.perspectiveFov[14]=s*e/(s-e)},n.prototype.createViewMatrix=function(){var t=this.position,i=this.rotation.pitch,s=this.rotation.yaw,e=Math.cos(i),r=Math.sin(i),o=Math.cos(s),n=Math.sin(s);this._xaxis.x=o,this._xaxis.y=0,this._xaxis.z=-n,this._yaxis.x=n*r,this._yaxis.y=e,this._yaxis.z=o*r,this._zaxis.x=n*e,this._zaxis.y=-r,this._zaxis.z=e*o,h.fromArrayLG([this._xaxis.x,this._yaxis.x,this._zaxis.x,0,this._xaxis.y,this._yaxis.y,this._zaxis.y,0,this._xaxis.z,this._yaxis.z,this._zaxis.z,0,-this._xaxis.dot(t),-this._yaxis.dot(t),-this._zaxis.dot(t),1],this.view_matrix)},n.prototype.look=function(t,i){this.rotation.yaw-=t,this.rotation.yaw<0?this.rotation.yaw=this.rotation.yaw+o:this.rotation.yaw>o&&(this.rotation.yaw=this.rotation.yaw-o),this.rotation.pitch-=i,this.rotation.pitch<0?this.rotation.pitch=this.rotation.pitch+o:this.rotation.pitch>o&&(this.rotation.pitch=this.rotation.pitch-o),this.createViewMatrix()},n.prototype.turnRight=function(t){this.rotation.yaw-=t,this.rotation.yaw<0&&(this.rotation.yaw=this.rotation.yaw+o),this.createViewMatrix()},n.prototype.turnLeft=function(t){this.rotation.yaw+=t,this.rotation.yaw>o&&(this.rotation.yaw=this.rotation.yaw-o),this.createViewMatrix()},n.prototype.lookUp=function(t){this.rotation.pitch-=t,this.rotation.pitch>o&&(this.rotation.pitch=this.rotation.pitch-o),this.createViewMatrix()},n.prototype.lookDown=function(t){this.rotation.pitch+=t,this.rotation.pitch<0&&(this.rotation.pitch=this.rotation.pitch+o),this.createViewMatrix()},n.prototype.moveTo=function(t,i,s){this.position.x=t,this.position.y=i,this.position.z=s,this.createViewMatrix()},n.prototype.move=function(t,i,s){this.position.x+=t,this.position.y+=i,this.position.z+=s,this.createViewMatrix()},n.prototype.moveRight=function(t){this.direction(),this._direction.normalizeLG(this._temp_vector1),this._temp_vector1.scaleLG(t,this._temp_vector2),this.up.crossLG(this._temp_vector2,this._temp_vector1),this.position.subtractLG(this._temp_vector1,this.position),this.createViewMatrix()},n.prototype.moveLeft=function(t){this.direction(),this._direction.normalizeLG(this._temp_vector1),this._temp_vector1.scaleLG(t,this._temp_vector2),this.up.crossLG(this._temp_vector2,this._temp_vector1),this.position.addLG(this._temp_vector1,this.position),this.createViewMatrix()},n.prototype.moveUp=function(t){this.up.normalizeLG(this._temp_vector1),this._temp_vector1.scaleLG(t,this._temp_vector2),this.position.subtractLG(this._temp_vector2,this.position),this.createViewMatrix()},n.prototype.moveDown=function(t){this.up.normalizeLG(this._temp_vector1),this._temp_vector1.scaleLG(t,this._temp_vector2),this.position.addLG(this._temp_vector2,this.position),this.createViewMatrix()},n.prototype.moveForward=function(t){this.direction(),this._direction.normalizeLG(this._temp_vector1),this._temp_vector1.scaleLG(t,this._temp_vector2),this.position.addLG(this._temp_vector2,this.position),this.createViewMatrix()},n.prototype.moveBackward=function(t){this.direction(),this._direction.normalizeLG(this._temp_vector1),this._temp_vector1.scaleLG(t,this._temp_vector2),this.position.subtractLG(this._temp_vector2,this.position),this.createViewMatrix()},i.exports=n},{linearalgea:2}],6:[function(t,i,s){var e=t("./scene.js"),r=t("./camera.js");i.exports.Scene=e,i.exports.Camera=r},{"./camera.js":5,"./scene.js":8}],7:[function(t,i,s){i.exports={_listeners:{},addListener:function(t,i){t in this._listeners||(this._listeners[t]=[]),this._listeners[t].push(i)},fire:function(t,i){var s={};void 0!==i&&(s=i),s.event=t,s.target=this;var e=this._listeners[t];if(void 0!==e)for(var r=0,h=e.length;r<h;r++)e[r].call(this,s)},removeListener:function(t,i){for(var s=this._listeners[t],e=0,r=s.length;e<r;e++)s[e]===i&&s.splice(e,1)}}},{}],8:[function(t,i,s){var e=t("linearalgea"),r=t("./camera.js"),h=t("./events.js"),o=t("../utilities/mixin.js"),n=t("../utilities/keycodes.js"),a=e.Vector,l=e.Matrix;function c(t){this.width=t.width,this.height=t.height,this.canvas=document.getElementById(t.canvas_id),this.ctx=this.canvas.getContext("2d"),this.ctx.strokeStyle="red",this.camera=new r(this.width,this.height),this.illumination=new a(90,0,0),this.meshes={},this._x_offset=Math.round(this.width/2),this._y_offset=Math.round(this.height/2),this._back_buffer=document.createElement("canvas"),this._back_buffer.width=this.width,this._back_buffer.height=this.height,this._back_buffer_ctx=this._back_buffer.getContext("2d"),this._back_buffer_image=null,this._depth_buffer=[],this._backface_culling=!0,this._quickdraw=!1,this._keys={},this._key_count=0,this._anim_id=null,this._needs_update=!0,this._draw_mode=0,this.canvas.tabIndex=1,this._back_buffer_image=this._back_buffer_ctx.createImageData(this.width,this.height),this.canvas.addEventListener("keydown",this.onKeyDown.bind(this),!1),this.canvas.addEventListener("keyup",this.onKeyUp.bind(this),!1),this.canvas.addEventListener("blur",this.emptyKeys.bind(this),!1),this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.canvas.addEventListener("mouseup",this.onMouseUp.bind(this),!1),this.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.initializeDepthBuffer(),this.update(),this._light_direction=new a(0,0,0),this._wv1=new a(0,0,0),this._wv2=new a(0,0,0),this._wv3=new a(0,0,0),this._v1=new a(0,0,0),this._v2=new a(0,0,0),this._v3=new a(0,0,0),this._v1t=new a(0,0,0),this._v2t=new a(0,0,0),this._v3t=new a(0,0,0),this._wvp_matrix=new l,this._world_matrix=new l,this._rotation_matrix=new l,this._translation_matrix=new l,this._scale_matrix=new l,this._cam_to_vert=new a(0,0,0),this._temp_matrix=new l,this._side1=new a(0,0,0),this._side2=new a(0,0,0),this._norm=new a(0,0,0)}o(c.prototype,h),c.prototype.emptyKeys=function(){this._key_count=0,this._keys={}},c.prototype.isKeyDown=function(t){var i=n[t];return i in this._keys&&this._keys[i]},c.prototype.onKeyDown=function(t){var i=t.keyCode||t.which;this.isKeyDown(i)||(this._key_count+=1,this._keys[i]=!0)},c.prototype.onKeyUp=function(t){var i=t.keyCode||t.which;i in this._keys&&(this._key_count-=1,this._keys[i]=!1)},c.prototype._getMousePos=function(t){var i=this.canvas.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}},c.prototype.onMouseDown=function(t){this._last_mouse_coords=void 0,this._last_mouse_update=void 0;var i={mouse:this._getMousePos(t)};this.fire("mousedown",i);var s=this.onMouseDrag.bind(this),e=function(){this.removeEventListener("mousemove",s,!1),this.removeEventListener("mouseup",e,!1),this._last_mouse_coords=void 0,this._last_mouse_update=void 0};this.canvas.addEventListener("mousemove",s,!1),this.canvas.addEventListener("mouseup",e,!1),this.canvas.addEventListener("mouseleave",e,!1)},c.prototype.onMouseUp=function(t){var i={mouse:this._getMousePos(t)};this.fire("mouseup",i)},c.prototype.onMouseMove=function(t){var i={mouse:this._getMousePos(t)};this.fire("mousemove",i)},c.prototype.onMouseDrag=function(t){var i=this._getMousePos(t);void 0===this._last_mouse_coords&&(this._last_mouse_coords=i),void 0===this._last_mouse_update&&(this._last_mouse_update=new Date);var s=new Date-this._last_mouse_update,e=i.x-this._last_mouse_coords.x,r=i.y-this._last_mouse_coords.y,h=0,o=0;s>0&&(h=e/s,o=r/s);var n={mouse:{x:i.x,y:i.y,xvel:h,yvel:o,deltax:e,deltay:r}};this._last_mouse_coords=i,this._last_mouse_update=s,this.fire("mousedrag",n)},c.prototype.initializeDepthBuffer=function(){for(var t=0,i=this.width*this.height;t<i;t++)this._depth_buffer[t]=9999999},c.prototype._clear_back_buffer_image=function(){for(var t=this._back_buffer_image.data,i=3;i<t.length;i+=4)t[i]=0},c.prototype.offscreen=function(t){var i=t.x+this._x_offset,s=t.y+this._y_offset;return t.z>1||i<0||i>this.width||s<0||s>this.height},c.prototype.toggleDrawMode=function(){this._draw_mode=(this._draw_mode+1)%2,this.renderScene()},c.prototype.toggleBackfaceCulling=function(){this._backface_culling=!this._backface_culling,this.renderScene()},c.prototype.toggleQuickDraw=function(){this._quickdraw=!this._quickdraw,this.renderScene()},c.prototype.drawPixel=function(t,i,s,e){if(t+=this._x_offset,i+=this._y_offset,t>=0&&t<this.width&&i>=0&&i<this.height){var r=t+i*this.width;if(s<this._depth_buffer[r]){var h=this._back_buffer_image.data,o=4*r;h[o]=e.rgb.r,h[o+1]=e.rgb.g,h[o+2]=e.rgb.b,h[o+3]=255,this._depth_buffer[r]=s}}},c.prototype.drawEdge=function(t,i,s){var e=Math.abs;if(t.x>=i.x){var r=t;t=i,i=r}for(var h=t.x,o=t.y,n=t.z,a=Math.max(e(i.x-t.x),e(i.y-t.y),e(i.z-t.z)),l=(i.x-t.x)/a,c=(i.y-t.y)/a,u=(i.z-t.z)/a,p=0;p<a;p++)this.drawPixel(Math.floor(h),Math.floor(o),n,s),h+=l,o+=c,n+=u},c.prototype.quickLine=function(t,i){var s=Math.round(t.x+this._x_offset),e=Math.round(t.y+this._y_offset),r=Math.round(i.x+this._x_offset),h=Math.round(i.y+this._y_offset);this.ctx.moveTo(s,e),this.ctx.lineTo(r,h)},c.prototype.drawTriangle=function(t,i,s,e){this._quickdraw?(this.quickLine(t,i),this.quickLine(i,s),this.quickLine(s,t)):(this.drawEdge(t,i,e),this.drawEdge(i,s,e),this.drawEdge(s,t,e))},c.prototype.fillTriangle=function(t,i,s,e){var r=t.x,h=i.x,o=s.x,n=t.y,a=i.y,l=s.y,c=t.z,u=i.z,p=s.z,_=0-this._x_offset,g=this.width-this._x_offset,f=0-this._y_offset,d=this.height-this._y_offset,y=Math.floor(Math.min(r,h,o));y<_&&(y=_);var m=Math.ceil(Math.max(r,h,o));m>g&&(m=g);var v=Math.floor(Math.min(n,a,l));v<f&&(v=f);var b=Math.ceil(Math.max(n,a,l));b>d&&(b=d);for(var w=l-n,x=r-o,z=n-a,M=h-r,L=o*n-r*l,k=r*a-h*n,G=w*h+x*a+L,j=z*o+M*l+k,q=w/G,P=x/G,E=L/G,I=z/j,S=M/j,D=k/j,V=y;V<=m;V++)for(var F=v;F<=b;F++){var C=q*V+P*F+E;if(C>=0&&C<=1){var Y=I*V+S*F+D;if(Y>=0&&Y<=1){var X=1-C-Y;if(X>=0&&X<=1){var A=X*c+C*u+Y*p;this.drawPixel(V,F,A,e)}}}}},c.prototype.renderScene=function(){this._quickdraw&&0===this._draw_mode?(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath()):(this._clear_back_buffer_image(),this.initializeDepthBuffer());var t=this.camera.view_matrix,i=this.camera.perspectiveFov,s=this.illumination;for(var e in this.meshes)if(this.meshes.hasOwnProperty(e)){var r=this.meshes[e],h=r.scale,o=r.rotation,n=r.position;l.scaleLG(h.x,h.y,h.z,this._scale_matrix),l.rotationLG(o.pitch,o.yaw,o.roll,this._rotation_matrix),l.translationLG(n.x,n.y,n.z,this._translation_matrix),this._scale_matrix.multiplyLG(this._rotation_matrix,this._world_matrix),this._world_matrix.multiplyLG(this._translation_matrix,this._world_matrix);for(var a=0;a<r.faces.length;a++){var c=r.faces[a].face,u=r.faces[a].color,p=r.vertices[c[0]],_=r.vertices[c[1]],g=r.vertices[c[2]];if(p.transformLG(this._world_matrix,this._v1t),_.transformLG(this._world_matrix,this._v2t),g.transformLG(this._world_matrix,this._v3t),this.camera.position.subtractLG(this._v1t,this._cam_to_vert),this._v2t.subtractLG(this._v1t,this._side1),this._v3t.subtractLG(this._v1t,this._side2),this._side1.crossLG(this._side2,this._norm),this._norm.magnitude()>=1e-8&&this._norm.normalizeLG(this._norm),!this._backface_culling||this._cam_to_vert.dot(this._norm)>=0){this._world_matrix.multiplyLG(t,this._temp_matrix),this._temp_matrix.multiplyLG(i,this._wvp_matrix),p.transformLG(this._wvp_matrix,this._wv1),_.transformLG(this._wvp_matrix,this._wv2),g.transformLG(this._wvp_matrix,this._wv3);var f=!0;if(this.offscreen(this._wv1)&&this.offscreen(this._wv2)&&this.offscreen(this._wv3)&&(f=!1),f)if(0===this._draw_mode)this.drawTriangle(this._wv1,this._wv2,this._wv3,u);else if(1===this._draw_mode){s.subtractLG(this._v1t,this._light_direction),this._light_direction.normalizeLG(this._light_direction);var d=this._norm.dot(this._light_direction);u=u.lighten(15*d),this.fillTriangle(this._wv1,this._wv2,this._wv3,u)}}}}this._quickdraw&&0===this._draw_mode?(this.ctx.stroke(),this.ctx.closePath()):(this._back_buffer_ctx.putImageData(this._back_buffer_image,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this._back_buffer,0,0,this.canvas.width,this.canvas.height))},c.prototype.addMesh=function(t){this.meshes[t.name]=t},c.prototype.removeMesh=function(t){delete this.meshes[t.name]},c.prototype.update=function(){this._key_count>0&&this.fire("keydown"),this._needs_update&&(this.renderScene(),this._needs_update=!1),this._anim_id=window.requestAnimationFrame(this.update.bind(this))},i.exports=c},{"../utilities/keycodes.js":13,"../utilities/mixin.js":14,"./camera.js":5,"./events.js":7,linearalgea:2}],9:[function(t,i,s){
/**
 * @license
 * Copyright (c) 2014 Eben Packwood. All rights reserved.
 * MIT License
 *
 */
var e=t("./geometry/geometry.js"),r=t("./engine/engine.js");i.exports.geometry=e,i.exports.engine=r},{"./engine/engine.js":6,"./geometry/geometry.js":11}],10:[function(t,i,s){var e=t("colour");i.exports=function(t,i,s,r){this.face=[t,i,s],this.color=new e(r)}},{colour:1}],11:[function(t,i,s){var e=t("./mesh.js"),r=t("./face.js");i.exports.Mesh=e,i.exports.Face=r},{"./face.js":10,"./mesh.js":12}],12:[function(t,i,s){var e=t("linearalgea").Vector,r=t("./face.js");function h(t,i,s){this.name=t,this.vertices=i,this.faces=s,this.position=new e(0,0,0),this.rotation={yaw:0,pitch:0,roll:0},this.scale={x:1,y:1,z:1}}h.fromJSON=function(t){for(var i=[],s=[],o=0,n=t.vertices.length;o<n;o++){var a=t.vertices[o];i.push(new e(a[0],a[1],a[2]))}for(var l=0,c=t.faces.length;l<c;l++){var u=t.faces[l];s.push(new r(u.face[0],u.face[1],u.face[2],u.color))}return new h(t.name,i,s)},i.exports=h},{"./face.js":10,linearalgea:2}],13:[function(t,i,s){i.exports={space:32,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,page_up:33,"page down":34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"left_window key":91,"right_window key":92,select_key:93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,backslash:220,closebracket:221,single_quote:222}},{}],14:[function(t,i,s){i.exports=function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);return t}},{}]},{},[9])(9)}}]);